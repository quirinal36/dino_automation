# 프로젝트 분석 리포트: Chrome Dino Game Automation

---

## 📌 프로젝트 개요

**목적:** Chrome 브라우저의 오프라인 공룡 게임(`chrome://dino`)을 컴퓨터 비전을 활용하여 자동으로 플레이하는 자동화 도구

**핵심 기술:** OpenCV 기반 실시간 장애물 감지 + PyAutoGUI 키보드 자동 제어

---

## 🏗️ 아키텍처

```
[1단계: 캘리브레이션]          [2단계: 게임 자동화]
calibrate.py                    main.py
    ↓                              ↓
roi_config.json  ───────────→  장애물 감지 → 자동 점프
                                   ↓
                           debug_captures/ + report.json
```

---

## 📁 파일 구조

| 파일 | 역할 |
|------|------|
| `main.py` | 게임 자동화 엔진 (핵심 로직) |
| `calibrate.py` | ROI 영역 설정 GUI 도구 |
| `roi_config.json` | 감지 영역 좌표 설정 |
| `report.json` | 플레이 기록 (31개 세션) |
| `requirements.txt` | Python 의존성 패키지 |
| `PRD.md` | 제품 요구사항 문서 |
| `README.md` | 사용자 가이드 (한국어) |

---

## ⚙️ 핵심 기능

### 1. 동적 속도 조절 시스템 (`SpeedController`)

게임 진행에 따라 파라미터가 자동 조정됨:

| 파라미터 | 초기값 | 최종값 (180초 후) |
|---------|-------|-----------------|
| 속도 배율 | 1.0x | 2.17x |
| 체크 간격 | 50ms | 23ms |
| 점프 쿨다운 | 300ms | 138ms |
| 감지 임계값 | 5% | 3% |
| ROI 확장 | 0% | 50% (우측 이동) |

**속도 팩터 계산 공식:**
```python
speed_factor = 1.0 + 1.17 * (log(1 + 2 * progress) / log(3))
```

### 2. 듀얼 모드 감지

- **라이트 모드:** 밝은 배경에서 어두운 장애물 감지
- **다크 모드:** 어두운 배경에서 밝은 장애물 감지
- 픽셀 비율 95%/5% 임계값으로 자동 전환

### 3. 가변 점프 강도

- 장애물 크기(픽셀 비율)에 따라 점프 세기 조절
- ≤10%: 약한 점프 (1ms)
- \>10%: 강한 점프 (150ms)

### 4. 디버깅 및 리포트

- 점프 시점마다 ROI 영역 PNG 저장
- 이전 디버그 폴더 타임스탬프로 자동 아카이브
- 플레이 통계 JSON 기록 (시간, 점프 횟수, ROI 정보)

---

## 🔧 기술 스택

| 분류 | 기술 | 용도 |
|-----|-----|-----|
| 언어 | Python 3.7+ | 메인 구현 |
| 컴퓨터 비전 | OpenCV ≥4.8.0 | 이미지 처리 |
| 화면 캡처 | Pillow ≥10.0.0 | ROI 스크린샷 |
| 키보드 제어 | PyAutoGUI ≥0.9.54 | 스페이스바 입력 |
| 데이터 처리 | NumPy ≥1.24.0 | 픽셀 배열 연산 |

---

## 📊 플레이 성과 (report.json 분석)

- **총 기록 세션:** 31회
- **최고 기록:** 745.7초 (약 12분 26초), 75회 점프
- **평균 세션:** 80~100초
- **현재 ROI 설정:** (290, 250) ~ (350, 290), 60×40 픽셀

---

## 🔄 처리 흐름

```
모니터 화면
    ↓
전체 화면 캡처 (PIL ImageGrab)
    ↓
동적 ROI 영역 추출
    ↓
그레이스케일 변환 (OpenCV)
    ↓
밝기 분포 분석
    ↓
라이트/다크 모드 판별
    ↓
장애물 감지 비율 계산
    ↓
동적 임계값 비교
    ↓
[장애물 감지 시]
├─ 점프 실행 (가변 강도)
├─ 디버그 이미지 저장
└─ 쿨다운 적용
    ↓
다음 체크 (23~50ms 간격)
```

---

## 📈 개발 이력 (Git 커밋)

| 날짜 | 주요 변경 |
|-----|---------|
| 2026-01-09 | 초기 프로젝트 구조 생성 |
| 2026-01-10 | 장애물 감지 민감도 개선 |
| 2026-01-10 | 동적 속도 조절 및 다크 모드 지원 |
| 2026-01-12 | 플레이 리포트 로깅 및 디버그 폴더 아카이브 |
| 2026-01-17 | 동적 ROI 이동 및 가변 점프 강도 |

---

## 🚀 향후 개선 계획 (PRD 기준)

| 우선순위 | 기능 |
|---------|-----|
| P1 | 새(bird) 장애물 감지 (다중 ROI 높이) |
| P1 | 숙이기(down arrow) 동작 추가 |
| P2 | 머신러닝 기반 패턴 예측 |
| P2 | OCR 기반 점수 인식 |
| P3 | GUI 제어 패널 |
| P3 | 다중 해상도 자동 적응 |

---

## ✅ 프로젝트 평가

### 강점

- 잘 설계된 클래스 기반 아키텍처
- 게임 속도 변화에 대응하는 동적 파라미터 시스템
- 라이트/다크 모드 자동 전환
- 포괄적인 디버깅 및 로깅 시스템
- 상세한 문서화 (README, PRD)

### 특이점

- 로그 곡선을 사용한 속도 팩터 계산
- ROI 영역이 시간에 따라 우측으로 확장되어 장애물을 더 빨리 감지

---

## 📝 결론

이 프로젝트는 컴퓨터 비전 기초와 동적 파라미터 조정 알고리즘을 잘 활용한 완성도 높은 게임 자동화 도구입니다. 실시간 장애물 감지, 게임 속도에 따른 적응형 파라미터, 듀얼 모드 지원 등 견고한 기능을 갖추고 있으며, 향후 새 장애물 감지나 머신러닝 통합 등으로 확장 가능한 구조를 가지고 있습니다.

---

*분석 일자: 2026-01-30*
